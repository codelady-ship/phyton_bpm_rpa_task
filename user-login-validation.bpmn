<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  xmlns:camunda="http://camunda.org/schema/1.0/bpmn"
  xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0"
  id="Defs_LoginValidation"
  targetNamespace="http://example.com/login-validation">

  <bpmn:process id="LoginValidationProcess" name="Login Validation with BPM + RPA" isExecutable="true">

    <bpmn:startEvent id="StartEvent">
      <bpmn:outgoing>F1</bpmn:outgoing>
    </bpmn:startEvent>

    <bpmn:serviceTask id="ReadAllowedUsers" name="Read Allowed Users from Excel">
      <bpmn:incoming>F1</bpmn:incoming>
      <bpmn:outgoing>F2</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="PerformLogin" name="Perform Login via RPA">
      <bpmn:incoming>F2</bpmn:incoming>
      <bpmn:outgoing>F3</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:exclusiveGateway id="GatewayDecision" name="Is user allowed?">
      <bpmn:incoming>F3</bpmn:incoming>
      <bpmn:outgoing>F_SUCCESS</bpmn:outgoing>
      <bpmn:outgoing>F_FAIL</bpmn:outgoing>
      <bpmn:outgoing>F_ERROR</bpmn:outgoing>
    </bpmn:exclusiveGateway>

    <bpmn:serviceTask id="TaskSuccess" name="Mark SUCCESS">
      <bpmn:incoming>F_SUCCESS</bpmn:incoming>
      <bpmn:outgoing>F4</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="TaskFail" name="Mark FAIL and highlight row">
      <bpmn:incoming>F_FAIL</bpmn:incoming>
      <bpmn:outgoing>F4</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="TaskSystemError" name="Mark SYSTEM_ERROR">
      <bpmn:incoming>F_ERROR</bpmn:incoming>
      <bpmn:outgoing>F4</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="WriteLog" name="Write Execution Log to Excel">
      <bpmn:incoming>F4</bpmn:incoming>
      <bpmn:outgoing>F5</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:endEvent id="EndEvent">
      <bpmn:incoming>F5</bpmn:incoming>
    </bpmn:endEvent>

    <bpmn:sequenceFlow id="F1" sourceRef="StartEvent" targetRef="ReadAllowedUsers"/>
    <bpmn:sequenceFlow id="F2" sourceRef="ReadAllowedUsers" targetRef="PerformLogin"/>
    <bpmn:sequenceFlow id="F3" sourceRef="PerformLogin" targetRef="GatewayDecision"/>
    <bpmn:sequenceFlow id="F_SUCCESS" sourceRef="GatewayDecision" targetRef="TaskSuccess"/>
    <bpmn:sequenceFlow id="F_FAIL" sourceRef="GatewayDecision" targetRef="TaskFail"/>
    <bpmn:sequenceFlow id="F_ERROR" sourceRef="GatewayDecision" targetRef="TaskSystemError"/>
    <bpmn:sequenceFlow id="F4" sourceRef="TaskSuccess" targetRef="WriteLog"/>
    <bpmn:sequenceFlow id="F5" sourceRef="WriteLog" targetRef="EndEvent"/>

  </bpmn:process>

  <bpmndi:BPMNDiagram id="Diagram_LoginValidation">
    <bpmndi:BPMNPlane id="Plane_LoginValidation" bpmnElement="LoginValidationProcess">

      <bpmndi:BPMNShape bpmnElement="StartEvent" id="StartEvent_di">
        <dc:Bounds x="80" y="140" width="36" height="36"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape bpmnElement="ReadAllowedUsers" id="ReadAllowedUsers_di"
        bioc:fill="#E3F2FD" bioc:stroke="#1565C0">
        <dc:Bounds x="160" y="120" width="180" height="80"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape bpmnElement="PerformLogin" id="PerformLogin_di"
        bioc:fill="#E3F2FD" bioc:stroke="#1565C0">
        <dc:Bounds x="380" y="120" width="200" height="80"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape bpmnElement="GatewayDecision" id="GatewayDecision_di"
        bioc:fill="#FFFDE7" bioc:stroke="#F9A825">
        <dc:Bounds x="620" y="135" width="50" height="50"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape bpmnElement="TaskSuccess" id="TaskSuccess_di"
        bioc:fill="#E8F5E9" bioc:stroke="#2E7D32">
        <dc:Bounds x="720" y="40" width="180" height="80"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape bpmnElement="TaskFail" id="TaskFail_di"
        bioc:fill="#FCE4EC" bioc:stroke="#C62828">
        <dc:Bounds x="720" y="140" width="180" height="80"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape bpmnElement="TaskSystemError" id="TaskSystemError_di"
        bioc:fill="#FFF3E0" bioc:stroke="#EF6C00">
        <dc:Bounds x="720" y="240" width="200" height="80"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape bpmnElement="WriteLog" id="WriteLog_di"
        bioc:fill="#E3F2FD" bioc:stroke="#1565C0">
        <dc:Bounds x="960" y="140" width="200" height="80"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape bpmnElement="EndEvent" id="EndEvent_di">
        <dc:Bounds x="1200" y="160" width="36" height="36"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNEdge bpmnElement="F1" id="F1_di">
        <di:waypoint x="116" y="158"/>
        <di:waypoint x="160" y="158"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge bpmnElement="F2" id="F2_di">
        <di:waypoint x="340" y="158"/>
        <di:waypoint x="380" y="158"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge bpmnElement="F3" id="F3_di">
        <di:waypoint x="580" y="158"/>
        <di:waypoint x="620" y="160"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge bpmnElement="F_SUCCESS" id="F_SUCCESS_di">
        <di:waypoint x="670" y="140"/>
        <di:waypoint x="720" y="80"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge bpmnElement="F_FAIL" id="F_FAIL_di">
        <di:waypoint x="670" y="160"/>
        <di:waypoint x="720" y="180"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge bpmnElement="F_ERROR" id="F_ERROR_di">
        <di:waypoint x="670" y="180"/>
        <di:waypoint x="720" y="280"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge bpmnElement="F4" id="F4_di">
        <di:waypoint x="900" y="180"/>
        <di:waypoint x="960" y="180"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge bpmnElement="F5" id="F5_di">
        <di:waypoint x="1160" y="180"/>
        <di:waypoint x="1200" y="180"/>
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</bpmn:definitions>
